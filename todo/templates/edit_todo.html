{% block title %}
Edit Todo List
{% endblock title %}

{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple Todo List Application</title>
</head>
<body>

  <script type="text/javascript">
      function changeBackground(colour) {
        document.getElementById("detail_line").style.backgroundColor = colour;
      };
  </script>

  <div>
      <h1>Simple Todo List Application</h1>

      <form method="post">
          <!-- The csrf template tag introduces a hidden field with an autogenerated
                token to avoid 'cross-site request forgery' security attacks. -->
          {% csrf_token %}

          <br>
          {% for city in city_weather %}
              {% if city.city == todo_edit_form.instance.location %}
                  <div id="detail_line">
                      {{todo_edit_form}}  Temperature: {{city.temperature}}

                      <button type="submit">Save task changes</button>
                  </div>
                  {% if "clouds" in city.description or "warm" in city.description%}
                      <!-- set div backgound colour to yellow -->
                      <script type="text/javascript">
                          changeBackground("yellow");
                      </script>
                   {% elif "rain" in city.description or "cold" in city.description %}
                       <!-- set div backgound colour to blue -->
                       <script type="text/javascript">
                           changeBackground("blue");
                       </script>
                   {% elif "hot" in city.description or "sunny" in city.description%}
                       <!-- set div backgound colour to red -->
                       <script type="text/javascript">
                           changeBackground("red");
                       </script>
                   {% else %}
                       <script type="text/javascript">
                           changeBackground("light-green");
                       </script>
                   {% endif %}
              {% endif %}
          {% endfor %}
      </form>
  </div>
</body>
</html>
{% endblock content %}
