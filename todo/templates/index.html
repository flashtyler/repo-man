{% block title %}
Todo List
{% endblock title %}

{% block content %}
<html >
<head>
  <meta charset="UTF-8">
  <title>Simple Todo List Application</title>
</head>
<body>

<script type="text/javascript">
      function changeBackground(colour) {
        document.getElementById("detail_line").style.backgroundColor = colour;
      };
</script>

  <div id="main">
      <h1>Simple Todo List Application</h1>
      <form id="main_form" method="post">
          <!-- The csrf template tag introduces a hidden field with an autogenerated
                token to avoid 'cross-site request forgery' security attacks. -->
          {% csrf_token %}

          {{todo_form.title }}  {{todo_form.location}}  {{todo_form.due_date}}

          <button>Add Task</button>

          <ol>
              {% for todo in todos %}
              <div id="content">
                  {% for city in city_weather %}
                      {% if city.city == todo.location %}
                          <li id="detail_line">
                              {{todo_form.done}} {{todo.title}} - {{todo.location}} - {{todo.due_date}}
                              | <a href="{% url 'edit_todo' todo.id %}">Edit this task</a> | <a href="{% url 'delete_todo' todo.id %}">Delete this task</a>
                          </li>

                          {% if "clouds" in city.description or "warm" in city.description%}
                              <!-- set div backgound colour to yellow -->
                              <script type="text/javascript">
                                  changeBackground("yellow");
                              </script>
                          {% elif "rain" in city.description or "cold" in city.description %}
                              <!-- set div backgound colour to blue -->
                              <script type="text/javascript">
                                  changeBackground("blue");
                              </script>
                          {% elif "hot" in city.description or "sunny" in city.description%}
                              <!-- set div backgound colour to red -->
                              <script type="text/javascript">
                                  changeBackground("red");
                              </script>
                          {% else %}
                              <script type="text/javascript">
                                  changeBackground("light-green");
                              </script>
                          {% endif %}
                       {% endif %}
                  {% endfor %}
              </div> <!-- content -->
              {% endfor %}
            </ol>
      </form>
 </div> <!-- main -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</body>
</html>
{% endblock content %}
